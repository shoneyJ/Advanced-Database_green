var io = require('socket.io-client');
var polyline = require('./polyline_enc_dec.js')

encodedPolyline='BGoj_n-CwygwQMoI4DghC4Dw8CwCgUoLof4DgK0KwW0FwMzK8LnGkI7GgKrY8kBnGsJjI8L_iBw0BnL8Q_J0PjIkN3IsOvHkNjIgP7G4N7GsOzFkNzF4N7GwRjIoVjIoVjI8VvHoV_YgrC3DoL_E0PrEgP3DkN3D0PjDsO3DsT_Js2BjD8QrE8anBoGnLghCvHouBvC4N7BkN3DsYzFwgBTsEvCgF7B4D7BkD7BwC7B8BvC8BjD8BjDoBrEoBvM7GrO3I7BnB_EjDzFrEjD_E7BnGUzKwC3hBUvb8BrnBwC_dkDjhB0FnpBoGzoB0K_xB8L_xB4IvgBkNzyBgUrqCgKvlBkkCrjIgtB_pF4Nv0BwC3I8pB78E4DrO0F7V8GvbgFrTkcnqDwHrd8GzZwMztBgZz_CkInf8G_YkN3rBsJnf8L3mBgUj6B8kB3uCoGjNwHzPkI7QkSrnB4cj6Bgen4Bo4BjiD8BjDsJrOoGnL0FjNkIzPkN_Y0KvMkI_JwHrJ8GvHgF_E8B7BgFrEsJ_EsJjD4IAwHkD8G8G0FsJ4DoLoBwMTwMjD8LrE0K7GkIvH0F3I4D_JoBzPwCrdAvgBA_JArJAjITjIA_2BnGzU7BzUnBrJArJU3IoB_O4DnaoG_E8BnG8BzKsEzKsEvHkD3I4DvR8G7fwMjhBwMrOgF3IkDvHkDzP8G_7BgUjNsE3S8GvMsEjIkD7Q8GvMgFjNgFvMgFnLsEzFwC3SwHnVkInfkNjcgKzFwCrO0FjIkDvWkIzesJ3hB4I3NwC3NwCrxB4IztB0FrsBoG72CoLzKoBn9BwH_EU3c4D74BwH7rFkX39CwM_5C8L_dsE_iBsErJoBjIUnGUrTwC_dsEvgB4D_dwC7BA36BUnaTnavCrY7BvW3Dnf_EzoB3IvWnG7uBzP3DnB_nBnQ_dvM_OnG_OvH_TzKn4BjhBv5BjhB3rB_Y7iC3mBjhB3S3cnQnpB3XriBrT7QvHzFvC_T_JnVrJvHjDzevMzK3DvM3Dvb3IvbjIjc7G3czF3N7B3crEzUvCvHnB3NTjcnBnpB7BnpBvC_nBvCnGAzFTzPnB_sBvCj1BvC_nGzK_OTrEArxBjDnVnB_OTjwBvC3_BjD3zHjN_mE7GnuBvC7a7BzFAjwBjDvbnBrnB7BrxBvCvoC3Dz9D7G7nCjDzyBjDjITzyBvCnpBvCztBvCvHTzjBnB_0CrEruFrJvqGnL_iB7B3zMnVrxGzKrYnB_TTvMT3NT3NTvHTnoEjI3SnBrOT_OTzUnBjNT3hB7BrEA3IT3STvqB7B_EAvRnBz6C_EjXnBj9C_E_nBjD7iCrE_nB_Er7BvH3crE_OvC_T3D77CrTniCzP7G7B7nCvRzKvCvMjDnGnBzjBjIv0BvMriBjIjI7BrEnBzoB3InkBjInLjIjI_ErJ_ErEvC7BnBvH7GrEnG3DjIjDrJnBzKAvMT3NsEnuBwH72CsEvvB8B_OoB3NUvMTnL7B_J3DjIrEnGzFrE7G7BnL7BvHT_TTvHA7BsnBnBwlBvCsdvCoajD0e_E8uBzF8pBzFgoB_E8fvCoL_E0Z7Goa7BoGzF8V7GgZ7G4XzKkhB_Jkc_JgZjI8V_E8L_EwMnGkNnG4NnGwM7G4N7G4N7GwMjDoGvH4NnGoLrOsYjNsYrJwRnGkNnLkXrJ4SzKgU_OkcjNkcrJsT_J4XnLgevHgU7LopBjDoL3DgP7G0e_E0e3D4c7B4XnB0PTgUA0eAwWUkNoBsYkDkhBsEkhBsE4hBsEofwCkXwCsYkD4mBoB8VUwHAsiBnQ7BzKjDzKrJ_J7Lvb_nB_Y7kB3IjNjmG8oJ7iCngDsoDzgF89B39CgejrB_EnGxfjvB';
var polylineDecoded =polyline.decode(encodedPolyline);

var longlats=polylineDecoded.polyline;

// // address of redis publish app.
const socket = io('ws://localhost:1000');
var count = 1;
setInterval(function() {
  console.log(count);
  if (count < longlats.length){
    var item = {};
    item.Coordinate = {};
    item.Coordinate.Longitude = longlats[count][0];
    item.Coordinate.Latitude = longlats[count][1];
    count++;     
    socket.emit('gpsone', [item]);
  }
  
}, 5000);

